<html>
 <head> 
  <meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
  <link href="main.css" rel="stylesheet" type="text/css" /> 
  <title>一封没寄出去的信</title> 
 </head> 
 <body> 
  <div style="margin: 2% 5% 2% 5%"> 
   <table style="width:100%;"> 
    <tbody>
     <tr> 
      <td> 
       <div style="padding: 2% 8% 5% 8%;"> 
        <div class="autotype" id="autotype"> 
         <h2>一封没寄出去的信</h2> 
         <p>这是一封没寄出去的信，写下了一些感受。</p>
         <p>内容1。</p>
         <p>内容2。</p>
         <p>内容3。</p>
         <p>内容4。</p> 
        </div> 
       </div> </td> 
     </tr> 
    </tbody>
   </table> 
  </div> 
  <script src="jquery-3.2.1.min.js"></script> 
  <script>
 $.fn.autotype = function(){
  var $text = $(this);
  console.log('this',this);
  var str = $text.html();//返回被选 元素的内容
  var index = 0;
  var x = $text.html('');
  //$text.html()和$(this).html('')有区别
  var timer = setInterval(function(){
   //substr(index, 1) 方法在字符串中抽取从index下标开始的一个的字符
   var current = str.substr(index, 1);
   if(current == '<'){
   //indexOf() 方法返回">"在字符串中首次出现的位置。
    index = str.indexOf('>', index) + 1;
   }else{
    index ++ ;
   }
   //console.log(["0到index下标下的字符",str.substring(0, index)],["符号",index & 1 ? '_': '']);
   //substring() 方法用于提取字符串中介于两个指定下标之间的字符
   $text.html(str.substring(0, index) + (index & 1 ? '_': ''));
   if(index >= str.length){
    clearInterval(timer);
   }
  },150);
 };
 $("#autotype").autotype();
</script>   
 </body>
</html>